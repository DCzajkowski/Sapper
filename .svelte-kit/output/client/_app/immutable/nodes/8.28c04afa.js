import{d as de}from"../chunks/environment.9aa685ef.js";import{s as _e,m as F,r as ge,c as he}from"../chunks/scheduler.3b48bc77.js";import{S as we,i as ve,g as R,s as _,r as v,m as L,D as be,h as U,f as u,c as g,j as oe,y as le,u as b,n as y,k as w,l as me,A as d,a as p,v as T,B as Te,C as qe,d as q,t as C,w as P}from"../chunks/index.e543c91d.js";import{H as Z,v as J,r as K,e as Ce,p as Pe,m as ce,c as pe,u as Re,a as S,d as Ue,b as Le}from"../chunks/validators.09245258.js";import"../chunks/singletons.9da193b5.js";import{g as ye,i as Ee}from"../chunks/navigation.a73baae4.js";const Se=de,Ie=!1,nt=Object.freeze(Object.defineProperty({__proto__:null,csr:Se,prerender:Ie},Symbol.toStringTag,{value:"Module"}));function We(l){let e;return{c(){e=L("This is a mandatory field")},l(t){e=y(t,"This is a mandatory field")},m(t,n){p(t,e,n)},d(t){t&&u(e)}}}function Ae(l){let e;return{c(){e=L("Email is not valid")},l(t){e=y(t,"Email is not valid")},m(t,n){p(t,e,n)},d(t){t&&u(e)}}}function Me(l){let e,t,n,f;return e=new S({props:{on:"required",$$slots:{default:[We]},$$scope:{ctx:l}}}),n=new S({props:{on:"email",hideWhenRequired:!0,$$slots:{default:[Ae]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=_(),v(n.$$.fragment)},l(a){b(e.$$.fragment,a),t=g(a),b(n.$$.fragment,a)},m(a,o){T(e,a,o),p(a,t,o),T(n,a,o),f=!0},p(a,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:a}),e.$set(s);const i={};o&16&&(i.$$scope={dirty:o,ctx:a}),n.$set(i)},i(a){f||(q(e.$$.fragment,a),q(n.$$.fragment,a),f=!0)},o(a){C(e.$$.fragment,a),C(n.$$.fragment,a),f=!1},d(a){a&&u(t),P(e,a),P(n,a)}}}function je(l){let e;return{c(){e=L("This is a mandatory field")},l(t){e=y(t,"This is a mandatory field")},m(t,n){p(t,e,n)},d(t){t&&u(e)}}}function ke(l){let e;return{c(){e=L("Username can only contain letters, numbers and underscores")},l(t){e=y(t,"Username can only contain letters, numbers and underscores")},m(t,n){p(t,e,n)},d(t){t&&u(e)}}}function xe(l){let e;return{c(){e=L("Username must be at least 5 characters long")},l(t){e=y(t,"Username must be at least 5 characters long")},m(t,n){p(t,e,n)},d(t){t&&u(e)}}}function ze(l){let e;return{c(){e=L("Username must be at most 24 characters long")},l(t){e=y(t,"Username must be at most 24 characters long")},m(t,n){p(t,e,n)},d(t){t&&u(e)}}}function Ne(l){let e,t,n,f,a,o,s,i;return e=new S({props:{on:"required",$$slots:{default:[je]},$$scope:{ctx:l}}}),n=new S({props:{on:"pattern",hideWhenRequired:!0,$$slots:{default:[ke]},$$scope:{ctx:l}}}),a=new S({props:{on:"minLength",hideWhenRequired:!0,$$slots:{default:[xe]},$$scope:{ctx:l}}}),s=new S({props:{on:"maxLength",hideWhenRequired:!0,$$slots:{default:[ze]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=_(),v(n.$$.fragment),f=_(),v(a.$$.fragment),o=_(),v(s.$$.fragment)},l(r){b(e.$$.fragment,r),t=g(r),b(n.$$.fragment,r),f=g(r),b(a.$$.fragment,r),o=g(r),b(s.$$.fragment,r)},m(r,$){T(e,r,$),p(r,t,$),T(n,r,$),p(r,f,$),T(a,r,$),p(r,o,$),T(s,r,$),i=!0},p(r,$){const I={};$&16&&(I.$$scope={dirty:$,ctx:r}),e.$set(I);const W={};$&16&&(W.$$scope={dirty:$,ctx:r}),n.$set(W);const N={};$&16&&(N.$$scope={dirty:$,ctx:r}),a.$set(N);const E={};$&16&&(E.$$scope={dirty:$,ctx:r}),s.$set(E)},i(r){i||(q(e.$$.fragment,r),q(n.$$.fragment,r),q(a.$$.fragment,r),q(s.$$.fragment,r),i=!0)},o(r){C(e.$$.fragment,r),C(n.$$.fragment,r),C(a.$$.fragment,r),C(s.$$.fragment,r),i=!1},d(r){r&&(u(t),u(f),u(o)),P(e,r),P(n,r),P(a,r),P(s,r)}}}function Oe(l){let e;return{c(){e=L("This is a mandatory field")},l(t){e=y(t,"This is a mandatory field")},m(t,n){p(t,e,n)},d(t){t&&u(e)}}}function Be(l){let e;return{c(){e=L("Password must be at least 8 characters long")},l(t){e=y(t,"Password must be at least 8 characters long")},m(t,n){p(t,e,n)},d(t){t&&u(e)}}}function He(l){let e;return{c(){e=L("Password must be at most 64 characters long")},l(t){e=y(t,"Password must be at most 64 characters long")},m(t,n){p(t,e,n)},d(t){t&&u(e)}}}function De(l){let e,t,n,f,a,o;return e=new S({props:{for:"password",on:"required",$$slots:{default:[Oe]},$$scope:{ctx:l}}}),n=new S({props:{for:"password",on:"minLength",hideWhenRequired:!0,$$slots:{default:[Be]},$$scope:{ctx:l}}}),a=new S({props:{for:"password",on:"maxLength",hideWhenRequired:!0,$$slots:{default:[He]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=_(),v(n.$$.fragment),f=_(),v(a.$$.fragment)},l(s){b(e.$$.fragment,s),t=g(s),b(n.$$.fragment,s),f=g(s),b(a.$$.fragment,s)},m(s,i){T(e,s,i),p(s,t,i),T(n,s,i),p(s,f,i),T(a,s,i),o=!0},p(s,i){const r={};i&16&&(r.$$scope={dirty:i,ctx:s}),e.$set(r);const $={};i&16&&($.$$scope={dirty:i,ctx:s}),n.$set($);const I={};i&16&&(I.$$scope={dirty:i,ctx:s}),a.$set(I)},i(s){o||(q(e.$$.fragment,s),q(n.$$.fragment,s),q(a.$$.fragment,s),o=!0)},o(s){C(e.$$.fragment,s),C(n.$$.fragment,s),C(a.$$.fragment,s),o=!1},d(s){s&&(u(t),u(f)),P(e,s),P(n,s),P(a,s)}}}function Fe(l){let e;return{c(){e=L("This is a mandatory field")},l(t){e=y(t,"This is a mandatory field")},m(t,n){p(t,e,n)},d(t){t&&u(e)}}}function Ge(l){let e;return{c(){e=L("Passwords do not match")},l(t){e=y(t,"Passwords do not match")},m(t,n){p(t,e,n)},d(t){t&&u(e)}}}function Ve(l){let e,t,n,f,a;return e=new S({props:{on:"required",$$slots:{default:[Fe]},$$scope:{ctx:l}}}),n=new S({props:{on:"passwordMatch",hideWhenRequired:!0,$$slots:{default:[Ge]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=_(),v(n.$$.fragment),f=_()},l(o){b(e.$$.fragment,o),t=g(o),b(n.$$.fragment,o),f=g(o)},m(o,s){T(e,o,s),p(o,t,s),T(n,o,s),p(o,f,s),a=!0},p(o,s){const i={};s&16&&(i.$$scope={dirty:s,ctx:o}),e.$set(i);const r={};s&16&&(r.$$scope={dirty:s,ctx:o}),n.$set(r)},i(o){a||(q(e.$$.fragment,o),q(n.$$.fragment,o),a=!0)},o(o){C(e.$$.fragment,o),C(n.$$.fragment,o),a=!1},d(o){o&&(u(t),u(f)),P(e,o),P(n,o)}}}function Ze(l){let e,t,n,f,a="Register",o,s,i,r,$,I,W,N,E,Q,O,X,A,Y,j,$e="Password Confirmation",ee,B,te,M,se,ne,k,ae,G,V,x,ie=`
`,H,re,fe;return $=new Z({props:{for:"email",$$slots:{default:[Me]},$$scope:{ctx:l}}}),E=new Z({props:{for:"username",$$slots:{default:[Ne]},$$scope:{ctx:l}}}),A=new Z({props:{for:"password",$$slots:{default:[De]},$$scope:{ctx:l}}}),M=new Z({props:{for:"passwordConfirmation",$$slots:{default:[Ve]},$$scope:{ctx:l}}}),{c(){e=R("meta"),t=_(),n=R("form"),f=R("h1"),f.textContent=a,o=_(),s=R("div"),i=R("input"),r=_(),v($.$$.fragment),I=_(),W=R("input"),N=_(),v(E.$$.fragment),Q=_(),O=R("input"),X=_(),v(A.$$.fragment),Y=_(),j=R("label"),j.textContent=$e,ee=_(),B=R("input"),te=_(),v(M.$$.fragment),se=R("br"),ne=_(),k=R("button"),ae=L("Login"),V=_(),x=R("pre"),x.textContent=ie,this.h()},l(m){const h=be("svelte-piv73q",document.head);e=U(h,"META",{name:!0,content:!0}),h.forEach(u),t=g(m),n=U(m,"FORM",{method:!0,action:!0,class:!0});var z=oe(n);f=U(z,"H1",{"data-svelte-h":!0}),le(f)!=="svelte-issj3d"&&(f.textContent=a),o=g(z),s=U(z,"DIV",{style:!0,class:!0});var c=oe(s);i=U(c,"INPUT",{type:!0,name:!0}),r=g(c),b($.$$.fragment,c),I=g(c),W=U(c,"INPUT",{type:!0,name:!0}),N=g(c),b(E.$$.fragment,c),Q=g(c),O=U(c,"INPUT",{type:!0,name:!0}),X=g(c),b(A.$$.fragment,c),Y=g(c),j=U(c,"LABEL",{for:!0,"data-svelte-h":!0}),le(j)!=="svelte-14qscnk"&&(j.textContent=$e),ee=g(c),B=U(c,"INPUT",{type:!0,name:!0}),te=g(c),b(M.$$.fragment,c),se=U(c,"BR",{}),ne=g(c),k=U(c,"BUTTON",{});var D=oe(k);ae=y(D,"Login"),D.forEach(u),c.forEach(u),z.forEach(u),V=g(m),x=U(m,"PRE",{"data-svelte-h":!0}),le(x)!=="svelte-3dgmvo"&&(x.textContent=ie),this.h()},h(){document.title="Register",w(e,"name","description"),w(e,"content","Register to the app"),w(i,"type","email"),w(i,"name","email"),w(W,"type","username"),w(W,"name","username"),w(O,"type","password"),w(O,"name","password"),w(j,"for","passwordConfirmation"),w(B,"type","password"),w(B,"name","passwordConfirmation"),k.disabled=G=!l[0].valid,me(s,"display","flex"),me(s,"justify-content","center"),w(s,"class","svelte-17o38z0"),w(n,"method","post"),w(n,"action","https://sapperapi.malpkakefirek.repl.co/register"),w(n,"class","svelte-17o38z0")},m(m,h){d(document.head,e),p(m,t,h),p(m,n,h),d(n,f),d(n,o),d(n,s),d(s,i),d(s,r),T($,s,null),d(s,I),d(s,W),d(s,N),T(E,s,null),d(s,Q),d(s,O),d(s,X),T(A,s,null),d(s,Y),d(s,j),d(s,ee),d(s,B),d(s,te),T(M,s,null),d(s,se),d(s,ne),d(s,k),d(k,ae),p(m,V,h),p(m,x,h),H=!0,re||(fe=[F(J.call(null,i,[K,Ce])),F(J.call(null,W,[K,Pe("^[a-zA-Z0-9_]+$"),ce(5),pe(24)])),F(J.call(null,O,[K,ce(8),pe(64)])),F(J.call(null,B,[K,Je])),Te(n,"submit",qe(l[2])),F(l[1].call(null,n))],re=!0)},p(m,[h]){const z={};h&16&&(z.$$scope={dirty:h,ctx:m}),$.$set(z);const c={};h&16&&(c.$$scope={dirty:h,ctx:m}),E.$set(c);const D={};h&16&&(D.$$scope={dirty:h,ctx:m}),A.$set(D);const ue={};h&16&&(ue.$$scope={dirty:h,ctx:m}),M.$set(ue),(!H||h&1&&G!==(G=!m[0].valid))&&(k.disabled=G)},i(m){H||(q($.$$.fragment,m),q(E.$$.fragment,m),q(A.$$.fragment,m),q(M.$$.fragment,m),H=!0)},o(m){C($.$$.fragment,m),C(E.$$.fragment,m),C(A.$$.fragment,m),C(M.$$.fragment,m),H=!1},d(m){m&&(u(t),u(n),u(V),u(x)),u(e),P($),P(E),P(A),P(M),re=!1,ge(fe)}}}function Je(l,e){if(l!==e.values.password)return{passwordMatch:!0}}function Ke(l,e,t){let n,{form:f}=e;const a=Re();he(l,a,s=>t(0,n=s));async function o(s){const i=new FormData(s.currentTarget),r=await fetch(s.currentTarget.action,{method:"POST",body:i}),$=Ue(await r.text());console.log($),$.type==="success"&&($.session_id&&$.username&&(localStorage.setItem("session_id",$.session_id),localStorage.setItem("username",$.username),await ye("/"),location.reload()),await Ee()),Le($)}return l.$$set=s=>{"form"in s&&t(3,f=s.form)},[n,a,o,f]}class at extends we{constructor(e){super(),ve(this,e,Ke,Ze,_e,{form:3})}}export{at as component,nt as universal};
